"use strict";angular.module("starWarsApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/people",{templateUrl:"views/people.html",controller:"PeopleCtrl"}).when("/people/:id",{templateUrl:"views/person.html",controller:"PersonCtrl"}).when("/films",{templateUrl:"views/films.html",controller:"FilmsCtrl"}).when("/films/:id",{templateUrl:"views/film.html",controller:"FilmCtrl"}).when("/planets",{templateUrl:"views/planets.html",controller:"PlanetsCtrl"}).when("/planets/:id",{templateUrl:"views/planet.html",controller:"PlanetCtrl"}).when("/starships",{templateUrl:"views/starships.html",controller:"StarshipsCtrl"}).when("/starships/:id",{templateUrl:"views/starship.html",controller:"StarshipCtrl"}).when("/vehicles",{templateUrl:"views/vehicles.html",controller:"VehiclesCtrl"}).when("/vehicles/:id",{templateUrl:"views/vehicle.html",controller:"VehicleCtrl"}).when("/species",{templateUrl:"views/species.html",controller:"SpeciesCtrl"}).when("/species/:id",{templateUrl:"views/spec.html",controller:"SpecCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("starWarsApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("starWarsApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("starWarsApp").controller("PeopleCtrl",["$scope","SwapiFactory",function(a,b){function c(d){b.getAll(d).then(function(b){b.data.results.forEach(function(c){a.data.push(c),a.progress=a.data.length/b.data.count*100}),b.data.next&&c(b.data.next)},function(a){console.error(a)})}a.data=[],a.progress=0,c("http://swapi.co/api/people")}]),angular.module("starWarsApp").factory("SwapiFactory",["$http",function(a){return{getAll:function(b){return a.get(b,{cache:!0})},getOne:function(b,c){var d=b+c;return a.get(d,{cache:!0})}}}]),angular.module("starWarsApp").controller("PersonCtrl",["$scope","$routeParams","SwapiFactory",function(a,b,c){var d=b.id;a.finished=!1,c.getOne("http://swapi.co/api/people/",d).then(function(b){a.person=b.data,a.person.id=b.data.url.match(/\d+/)[0],a.films=[],a.starships=[],a.vehicles=[],a.spec={},c.getAll(b.data.species).then(function(b){a.spec.name=b.data.name,a.spec.id=b.data.url.match(/\d+/)[0]},function(a){console.log(a)}),b.data.films.forEach(function(b){c.getAll(b).then(function(b){var c={episode_id:b.data.episode_id,title:b.data.title,id:b.data.url.match(/\d+/)[0]};a.films.push(c)},function(a){console.log(a)})}),b.data.starships.forEach(function(b){c.getAll(b).then(function(b){var c={name:b.data.name,id:b.data.url.match(/\d+/)[0]};a.starships.push(c)},function(a){console.log(a)})}),b.data.vehicles.forEach(function(b){c.getAll(b).then(function(b){var c={name:b.data.name,id:b.data.url.match(/\d+/)[0]};a.vehicles.push(c)},function(a){console.log(a)})}),a.finished=!0},function(a){console.log(a)})}]),angular.module("starWarsApp").directive("swPerson",function(){return{templateUrl:"views/templates/people.tpl.html",restrict:"E",link:function(a,b,c){a.id=a.person.url.match(/\d+/)[0]}}}),angular.module("starWarsApp").directive("lightCard",function(){return{restrict:"E",scope:{data:"=",category:"@",url:"@"},templateUrl:"views/templates/light-card.tpl.html"}}),angular.module("starWarsApp").controller("FilmsCtrl",["$scope","SwapiFactory",function(a,b){a.films=[],b.getAll("http://swapi.co/api/films").then(function(b){b.data.results.forEach(function(b){b.id=b.url.match(/\d+/)[0],a.films.push(b)})},function(a){console.log(a)})}]),angular.module("starWarsApp").controller("FilmCtrl",["$scope","$routeParams","SwapiFactory",function(a,b,c){var d=b.id;a.finished=!1,a.characters=[],a.planets=[],a.starships=[],a.vehicles=[],c.getOne("http://swapi.co/api/films/",d).then(function(b){a.film=b.data,b.data.characters.forEach(function(b){c.getAll(b).then(function(b){b.data.id=b.data.url.match(/\d+/)[0],a.characters.push(b.data)},function(a){console.error(a)})}),b.data.planets.forEach(function(b){c.getAll(b).then(function(b){b.data.id=b.data.url.match(/\d+/)[0],a.planets.push(b.data)},function(a){console.error(a)})}),a.finished=!0},function(a){console.error(a)})}]),angular.module("starWarsApp").controller("PlanetsCtrl",["$scope","SwapiFactory",function(a,b){function c(d){b.getAll(d).then(function(b){b.data.results.forEach(function(c){c.id=c.url.match(/\d+/)[0],a.planets.push(c),a.progress=a.planets.length/b.data.count*100}),b.data.next&&c(b.data.next)},function(a){console.error(a)})}a.planets=[],a.progress=0,c("http://swapi.co/api/planets")}]),angular.module("starWarsApp").controller("PlanetCtrl",["$scope","$routeParams","SwapiFactory",function(a,b,c){a.finished=!1;var d=b.id;c.getOne("http://swapi.co/api/planets/",d).then(function(b){a.planet=b.data,a.planet.id=b.data.url.match(/\d+/)[0],a.films=[],a.residents=[],b.data.films.forEach(function(b){c.getAll(b).then(function(b){var c={episode_id:b.data.episode_id,title:b.data.title,id:b.data.url.match(/\d+/)[0]};a.films.push(c)},function(a){console.log(a)})}),b.data.residents.forEach(function(b){c.getAll(b).then(function(b){var c={name:b.data.name,id:b.data.url.match(/\d+/)[0]};a.residents.push(c)},function(a){console.log(a)})}),a.finished=!0},function(a){console.log(a)})}]),angular.module("starWarsApp").controller("StarshipsCtrl",["$scope","SwapiFactory",function(a,b){function c(d){b.getAll(d).then(function(b){var d=b.data.count;b.data.results.forEach(function(b){b.id=b.url.match(/\d+/)[0],a.starships.push(b),a.progress=a.starships.length/d*100}),b.data.next&&c(b.data.next)},function(a){console.error(a)})}a.starships=[],a.progress=0,c("http://swapi.co/api/starships")}]),angular.module("starWarsApp").controller("StarshipCtrl",["$scope","$routeParams","SwapiFactory",function(a,b,c){a.finished=!1;var d=b.id;c.getOne("http://swapi.co/api/starships/",d).then(function(b){a.starship=b.data,a.starship.id=b.data.url.match(/\d+/)[0],a.films=[],a.pilots=[],b.data.films.forEach(function(b){c.getAll(b).then(function(b){var c={episode_id:b.data.episode_id,title:b.data.title,id:b.data.url.match(/\d+/)[0]};console.log(c),a.films.push(c)},function(a){console.log(a)})}),b.data.pilots.forEach(function(b){c.getAll(b).then(function(b){var c={name:b.data.name,id:b.data.url.match(/\d+/)[0]};a.pilots.push(c)},function(a){console.log(a)})}),a.finished=!0},function(a){console.log(a)})}]),angular.module("starWarsApp").controller("VehiclesCtrl",["$scope","SwapiFactory",function(a,b){function c(d){b.getAll(d).then(function(b){var d=b.data.count;b.data.results.forEach(function(b){b.id=b.url.match(/\d+/)[0],a.vehicles.push(b),a.progress=a.vehicles.length/d*100}),b.data.next&&c(b.data.next)},function(a){console.error(a)})}a.vehicles=[],a.progress=0,c("http://swapi.co/api/vehicles")}]),angular.module("starWarsApp").controller("VehicleCtrl",["$scope","$routeParams","SwapiFactory",function(a,b,c){a.finished=!1;var d=b.id;c.getOne("http://swapi.co/api/vehicles/",d).then(function(b){a.vehicle=b.data,a.vehicle.id=b.data.url.match(/\d+/)[0],a.films=[],a.pilots=[],b.data.films.forEach(function(b){c.getAll(b).then(function(b){var c={episode_id:b.data.episode_id,title:b.data.title,id:b.data.url.match(/\d+/)[0]};a.films.push(c)},function(a){console.log(a)})}),b.data.pilots.forEach(function(b){c.getAll(b).then(function(b){var c={name:b.data.name,id:b.data.url.match(/\d+/)[0]};a.pilots.push(c)},function(a){console.log(a)})}),a.finished=!0},function(a){console.log(a)})}]),angular.module("starWarsApp").controller("SpeciesCtrl",["$scope","SwapiFactory",function(a,b){function c(d){b.getAll(d).then(function(b){b.data.results.forEach(function(c){c.id=c.url.match(/\d+/)[0],c.imageId=c.people[0].match(/\d+/)[0],a.species.push(c),a.progress=a.species.length/b.data.count*100}),b.data.next&&c(b.data.next)},function(a){console.error(a)})}a.species=[],a.progress=0,c("http://swapi.co/api/species")}]),angular.module("starWarsApp").controller("SpecCtrl",["$scope","$routeParams","SwapiFactory",function(a,b,c){a.finished=!1;var d=b.id;c.getOne("http://swapi.co/api/species/",d).then(function(b){a.spec=b.data,a.spec.id=b.data.url.match(/\d+/)[0],a.films=[],a.people=[],a.homeworld={},c.getAll(b.data.homeworld).then(function(b){a.homeworld.name=b.data.name,a.homeworld.id=b.data.url.match(/\d+/)[0]},function(a){console.error(a)}),b.data.films.forEach(function(b){c.getAll(b).then(function(b){var c={episode_id:b.data.episode_id,title:b.data.title,id:b.data.url.match(/\d+/)[0]};a.films.push(c)},function(a){console.log(a)})}),b.data.people.forEach(function(b){c.getAll(b).then(function(b){var c={name:b.data.name,id:b.data.url.match(/\d+/)[0]};a.people.push(c)},function(a){console.log(a)})}),a.finished=!0},function(a){console.log(a)})}]);